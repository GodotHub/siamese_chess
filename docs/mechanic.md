# 机制

## 介绍

- 基于国际象棋形式的游戏世界；但是游戏类型为解谜，而非国际象棋变种；
- 玩家扮演黑猫Cheshire，执黑；暹罗猫Pastor执白参与游戏；

## 回合制

- 玩家一个回合内只能够操作一个单位；
- 虽然你可以绘制多条线条，但是一回合仅应用于一个单位，其他操作视作预先走子；
- 白方先手，黑方后手；
- 仅出现其中一方阵营时，仍然计回合数；
- 不允许跳过回合，可能会出现“楚茨文克”局面；

## 棋盘

- 8 * 8正方形网格，基底与国际象棋棋盘类似；
- 棋盘周围有坐标标注；
- 颜色较浅，以灰白色为主，便于显示草稿和指令线条；
- 存在有高低差、墙壁等一类地形，影响到玩家移动，绘制线条等；
- 以3D模型形式呈现；
- 访问部分棋子或者位置可以跳转至其他棋盘；
- 不同棋盘场景，对于棋子的动作会有不同反应；
- 切换场景时，玩家可能会从不同位置进场；
- 棋盘自身携带有输入输出，取决于对应空地位置；

![image](chessboard.svg)

- 制作棋盘时，需要使用Area3D指定每个格子的高度，以及点击的碰撞形状；

## 棋子

- 包含了玩家、NPC、道具等；
- 可以从任何棋子开始连线，连接到空白位置或者另外一颗棋子上，通常用于移动和吃子，是否有效取决于棋子本身；
- 棋子存在朝向的说法，以棋子自身实际逻辑为准，例如白方棋子永远朝向北方、黑方棋子永远朝向南方；
- 棋子可以通过某种条件来获取，例如吃子，获得得棋子放置到右手边；
- 获得的棋子可以通过“打入”，放置到空白位置；
- 多个棋子不能挤在同一格子上；
- 玩家可以单击棋子查看详情和帮助文档；

![image](piece.svg)

## 箭头

![image](navigation_1.svg)

- 允许从任意一格开始绘制，指向除开头本身以外的任意一格；
- 如果从箭头的末端开始连线，则这两条箭头会组合成带有折线的箭头；
- 被连接的棋子可以消耗线条进行移动；
- 棋子也可以保留线条，通过线条与其他棋子交互；

![image](navigation_2.svg)

- 线条连接后的情况取决于棋子自身功能，例如Cheshire连接到空白位置则进行移动，连接到门口则切换场景；
- 箭头不能完全挡住棋子，棋子的绘制优先级会比箭头高；
- 箭头应当指向棋盘中实际高低位置；


## 草稿

- 一面棋盘对应一份草稿；
- 允许绘制自由线条，同时以线条形式保存，以线条为单位进行擦除；
- 由于棋盘有高度差，草稿需要单独作为一个图层，绘制优先级为最高；
- 支持手写笔和压感；
- 支持文字输入；

## 棋钟

- 取决于场景，通常情况为正计时，仅对黑方计时作为成绩，白方不计时，目的在于确认着法。
- 部分情况为倒计时，对双方计时。
- 白方Pastor也需要足够的思考时间，倒计时较少，或许可以使用拖延战术击败他。

## 悔棋

- 每次悔棋都可以撤销到落子之前的状态；
- 新游戏时，玩家可以自愿选择关闭悔棋以及不限次数悔棋；
- 黑方无法通过悔棋补偿时间，但是白方能够因为对方悔棋，将自己的倒计时回退到上一步的状态；
- 这意味着悔棋所消耗的时间是黑方单方面的损失。

## 胜负

- 游戏为解谜游戏，虽然没有明确的胜负，不过仍然需要想办法达成目标；
- 黑方的目标较为多样，例如某些地图要求玩家从A推进到B、将杀特定目标、推箱子等；
- 白方的目标也比较多样，比如将杀玩家本体；
- 玩家自身被将杀时，可以通过重置、悔棋（如果设置有）的方式回退到前面的状态；
- 收益上，双方可以共赢，也可以是零和博弈。你可能也需要尝试帮助白方完成目标；
- 不设平局，只关注双方是否完成目标产生相对应的价值，可以主动使用重置以重新对局；


